<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="Cinestar_app.Filmovi"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Title="Filmovi"
             BackgroundColor="#0F0F23">

    <Grid RowDefinitions="Auto,*,Auto">
        <Label Grid.Row="0" 
               Text="{Binding CurrentCity}" 
               FontSize="24" 
               TextColor="White"
               HorizontalOptions="Center"
               Margin="0,20,0,10"/>

        <RefreshView Grid.Row="1"
                     x:Name="RefreshView"
                     IsRefreshing="{Binding IsRefreshing}">
            <CarouselView x:Name="FilmoviCollection"
                          ItemsSource="{Binding Movies}"
                          BackgroundColor="Transparent"
                          HeightRequest="500"
                          VerticalOptions="FillAndExpand"
                          Loop="False">
                <CarouselView.ItemTemplate>
                    <DataTemplate>
                        <!-- ✅ Border umjesto Frame -->
                        <Border Stroke="#3B82F6" 
                                StrokeThickness="2"
                                StrokeShape="RoundRectangle 20"
                                BackgroundColor="#1E3A8A"
                                Margin="15"
                                Padding="0">
                            <ScrollView MaximumHeightRequest="500">
                                <VerticalStackLayout Spacing="12" Padding="20">
                                    <!-- ✅ Border za Image umjesto CornerRadius -->
                                    <Border Stroke="#60A5FA" 
                                            StrokeThickness="1"
                                            StrokeShape="RoundRectangle 12"
                                            HorizontalOptions="Center">
                                        <Image Source="{Binding Poster}"
                                               HeightRequest="260"
                                               WidthRequest="200"
                                               Aspect="AspectFill"
                                               BackgroundColor="#334155"/>
                                    </Border>

                                    <!-- NASLOV -->
                                    <Label Text="{Binding Title}" 
                                           TextColor="White"
                                           FontSize="20"
                                           FontAttributes="Bold"
                                           HorizontalOptions="Center"
                                           LineBreakMode="TailTruncation"/>

                                    <!-- GODINA + OCJENA -->
                                    <HorizontalStackLayout HorizontalOptions="Center" Spacing="15">
                                        <Label Text="{Binding Year}" 
                                               TextColor="#94A3B8"
                                               FontSize="16"/>
                                        <Label Text="{Binding ImdbRating}" 
                                               TextColor="Gold"
                                               FontSize="16"
                                               FontAttributes="Bold"/>
                                    </HorizontalStackLayout>

                                    <!-- OPIS FILMA -->
                                    <Label Text="{Binding Plot}" 
                                           TextColor="#CBD5E1"
                                           FontSize="14"
                                           LineBreakMode="WordWrap"
                                           MaxLines="4"
                                           HorizontalOptions="FillAndExpand"
                                           Margin="0,10,0,0"/>
                                </VerticalStackLayout>
                            </ScrollView>
                        </Border>
                    </DataTemplate>
                </CarouselView.ItemTemplate>
            </CarouselView>
        </RefreshView>

        <Button Grid.Row="2" 
                Text="↻ Refresh" 
                BackgroundColor="#1E3A8A"
                TextColor="White"
                CornerRadius="25"
                Margin="20"
                Clicked="OnRefreshClicked"/>
    </Grid>
</ContentPage>
